# create-daily-tasks äº‘å‡½æ•°éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥

### 1. è‡ªåŠ¨æ£€æŸ¥

è¿è¡Œéƒ¨ç½²çŠ¶æ€æ£€æŸ¥è„šæœ¬ï¼š

```bash
node check-deployment.js
```

### 2. æ‰‹åŠ¨æ£€æŸ¥æ¸…å•

- [ ] `package.json` æ–‡ä»¶å­˜åœ¨ä¸”é…ç½®æ­£ç¡®
- [ ] `index.js` æ–‡ä»¶å­˜åœ¨ä¸”è¯­æ³•æ­£ç¡®
- [ ] `node_modules` ç›®å½•å­˜åœ¨
- [ ] `wx-server-sdk` ä¾èµ–å·²å®‰è£…
- [ ] `config.json` æ–‡ä»¶å­˜åœ¨

## ğŸš€ éƒ¨ç½²æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
./scripts/clouddeploy/deploy-create-daily-tasks.sh
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. è¿›å…¥äº‘å‡½æ•°ç›®å½•
cd cloudfunctions/create-daily-tasks

# 2. å®‰è£…ä¾èµ–ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
npm install

# 3. æ£€æŸ¥è¯­æ³•
node -c index.js

# 4. ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·éƒ¨ç½²
wx cloud functions deploy create-daily-tasks --env production
```

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…· GUI

1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. å¯¼å…¥é¡¹ç›®
3. åœ¨äº‘å¼€å‘æ§åˆ¶å°ä¸­
4. é€‰æ‹© `create-daily-tasks` äº‘å‡½æ•°
5. ç‚¹å‡»"ä¸Šä¼ å¹¶éƒ¨ç½²"

## ğŸ”§ ä¾èµ–ç®¡ç†

### å®‰è£…ä¾èµ–

```bash
npm install
```

### æ›´æ–°ä¾èµ–

```bash
npm update
```

### æ£€æŸ¥ä¾èµ–

```bash
npm list
```

### æ¸…ç†ä¾èµ–

```bash
rm -rf node_modules package-lock.json
npm install
```

## ğŸ§ª æµ‹è¯•

### æœ¬åœ°æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬
node test.js
```

### äº‘å‡½æ•°æµ‹è¯•

1. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­
2. æ‰“å¼€äº‘å‡½æ•°è°ƒè¯•é¢æ¿
3. é€‰æ‹© `create-daily-tasks`
4. è¾“å…¥æµ‹è¯•å‚æ•°ï¼š

```json
{
  "userId": "test_user_id"
}
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹æ—¥å¿—

1. å¾®ä¿¡å¼€å‘è€…å·¥å…· â†’ äº‘å¼€å‘
2. äº‘å‡½æ•° â†’ create-daily-tasks
3. æ—¥å¿—æ ‡ç­¾é¡µ

### æ€§èƒ½ç›‘æ§

1. äº‘å¼€å‘æ§åˆ¶å°
2. äº‘å‡½æ•°ç›‘æ§
3. æŸ¥çœ‹è°ƒç”¨æ¬¡æ•°ã€è€—æ—¶ç­‰æŒ‡æ ‡

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ä¾èµ–å®‰è£…å¤±è´¥

```bash
# æ¸…ç†ç¼“å­˜
npm cache clean --force
# é‡æ–°å®‰è£…
npm install
```

#### 2. è¯­æ³•é”™è¯¯

```bash
# æ£€æŸ¥è¯­æ³•
node -c index.js
```

#### 3. éƒ¨ç½²å¤±è´¥

- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤äº‘å¼€å‘ç¯å¢ƒé…ç½®
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—

#### 4. äº‘å‡½æ•°è°ƒç”¨å¤±è´¥

- æ£€æŸ¥å‚æ•°æ ¼å¼
- ç¡®è®¤ç”¨æˆ·æƒé™
- æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—

### è°ƒè¯•æŠ€å·§

#### 1. æœ¬åœ°è°ƒè¯•

```bash
# è¿è¡Œæ£€æŸ¥è„šæœ¬
node check-deployment.js

# è¿è¡Œæµ‹è¯•è„šæœ¬
node test.js
```

#### 2. æ—¥å¿—è°ƒè¯•

åœ¨äº‘å‡½æ•°ä¸­æ·»åŠ è¯¦ç»†æ—¥å¿—ï¼š

```javascript
console.log("è°ƒè¯•ä¿¡æ¯:", data);
```

#### 3. é”™è¯¯å¤„ç†

ç¡®ä¿äº‘å‡½æ•°æœ‰å®Œå–„çš„é”™è¯¯å¤„ç†ï¼š

```javascript
try {
  // ä¸šåŠ¡é€»è¾‘
} catch (error) {
  console.error("é”™è¯¯:", error);
  return {
    success: false,
    error: error.message,
  };
}
```

## ğŸ“ ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬å·è§„èŒƒ

- ä¸»ç‰ˆæœ¬å·ï¼šé‡å¤§åŠŸèƒ½æ›´æ–°
- æ¬¡ç‰ˆæœ¬å·ï¼šæ–°åŠŸèƒ½æ·»åŠ 
- ä¿®è®¢å·ï¼šBug ä¿®å¤

### æ›´æ–°è®°å½•

åœ¨ `README.md` ä¸­è®°å½•ï¼š

- ç‰ˆæœ¬å·
- æ›´æ–°å†…å®¹
- ä¿®å¤çš„é—®é¢˜
- æ–°å¢åŠŸèƒ½

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

### 1. å‚æ•°éªŒè¯

ç¡®ä¿æ‰€æœ‰è¾“å…¥å‚æ•°éƒ½ç»è¿‡éªŒè¯ï¼š

```javascript
if (!userId) {
  return {
    success: false,
    error: "ç¼ºå°‘å¿…è¦å‚æ•°",
  };
}
```

### 2. æƒé™æ§åˆ¶

æ£€æŸ¥ç”¨æˆ·æƒé™ï¼š

```javascript
// éªŒè¯ç”¨æˆ·èº«ä»½
const userResult = await db
  .collection("user-info")
  .where({
    userId: userId,
  })
  .get();
```

### 3. æ•°æ®å®‰å…¨

- é¿å…åœ¨æ—¥å¿—ä¸­è¾“å‡ºæ•æ„Ÿä¿¡æ¯
- ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢æ³¨å…¥
- é™åˆ¶æ•°æ®åº“æ“ä½œæƒé™

## ğŸ“ æ”¯æŒ

### è”ç³»æ–¹å¼

- å¼€å‘è€…ï¼šAI Assistant
- é¡¹ç›®ï¼šmedia-mini-tool
- æ–‡æ¡£ï¼š`docs/CREATE_DAILY_TASKS_NEW_ACCOUNT_INITIALIZATION.md`

### ç›¸å…³æ–‡æ¡£

- [äº‘å‡½æ•°å¼€å‘æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions.html)
- [å¾®ä¿¡äº‘å¼€å‘æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)
- [wx-server-sdk æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/wx-server-sdk.html)

---

**æœ€åæ›´æ–°**: 2024-01-15  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… å·²å‡†å¤‡å°±ç»ª
