<!--pages/layout-tool/layout-tool.wxml-->
<view class="layout-tool-container">
  <view class="tool-section">
    <view class="section-title">排版工具</view>
    
    <!-- 操作按钮 -->
    <view class="action-buttons">
      <button class="action-btn primary" bindtap="downloadTestFile">下载测试文件</button>
      <button class="action-btn secondary" bindtap="clearAllFiles" wx:if="{{downloadedFiles.length > 0}}">清空所有文件</button>
    </view>
    
    <!-- 下载状态 -->
    <view class="download-status" wx:if="{{downloadStatus}}">
      <text class="status-text">{{downloadStatus}}</text>
    </view>
    
    <!-- 文件列表 -->
    <view class="file-list-section" wx:if="{{downloadedFiles.length > 0}}">
      <view class="section-subtitle">已下载文件 ({{downloadedFiles.length}})</view>
      <view class="file-list">
        <view class="file-item" wx:for="{{downloadedFiles}}" wx:key="index">
          <view class="file-info">
            <view class="file-header">
              <text class="file-name" bindtap="readFileContent" data-file="{{item}}">{{item.name}}</text>
              <view class="file-actions">
                <button class="file-action-btn preview-btn" bindtap="readFileContent" data-file="{{item}}">预览</button>
                <button class="file-action-btn delete-btn" bindtap="deleteFile" data-file="{{item}}">删除</button>
              </view>
            </view>
            <view class="file-details">
              <text class="file-size">{{item.size}}</text>
              <text class="file-time">{{item.time}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
    

    
    <!-- 无文件提示 -->
    <view class="no-data" wx:if="{{downloadedFiles.length === 0 && downloadStatus && !downloadStatus.includes('失败')}}">
      <view class="no-data-icon">📄</view>
      <text class="no-data-text">暂无下载的文件</text>
      <text class="no-data-hint">点击"下载测试文件"开始下载</text>
    </view>
  </view>
</view>
