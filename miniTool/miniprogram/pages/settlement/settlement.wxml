<!-- ç»“ç®—é¡µé¢ -->
<view class="settlement-container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">æœ¬æœŸç»“ç®—</text>
    <text class="settlement-period">{{currentSettlementPeriod}}</text>
  </view>

  <!-- ç»“ç®—ç»Ÿè®¡åŒºåŸŸ -->
  <view class="stats-area">
    <view class="stats-row">
      <view class="stat-item">
        <text class="stat-number">{{settlementStats.totalAccounts}}</text>
        <text class="stat-label">æ€»è´¦å·</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{settlementStats.pendingAccounts}}</text>
        <text class="stat-label">å¾…ç»“ç®—</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{settlementStats.settledAccounts}}</text>
        <text class="stat-label">å·²ç»“ç®—</text>
      </view>
    </view>
    
    <!-- æ”¶ç›Šç»Ÿè®¡ -->
    <view class="earnings-row">
      <view class="earnings-item">
        <text class="earnings-label">å·²ç»“ç®—è´¦å·æ”¶ç›Šï¼š</text>
        <text class="earnings-number">Â¥{{settlementStats.totalAccountEarnings}}</text>
      </view>
      <view class="earnings-item">
        <text class="earnings-label">å·²ç»“ç®—æ”¶ç›Šï¼š</text>
        <text class="earnings-number">Â¥{{settlementStats.settledEarnings}}</text>
      </view>
    </view>
  </view>



  <!-- ç»“ç®—è´¦å·åˆ—è¡¨ -->
  <view class="account-list">
    <view class="list-header">
      <text class="list-title">ç»“ç®—è´¦å·åˆ—è¡¨</text>
      <text class="list-count">å…±{{settlementStats.totalAccounts}}ä¸ªè´¦å·</text>
    </view>
    
    <view 
      class="account-item" 
      wx:for="{{settlementAccountList}}" 
      wx:key="accountId"
    >
      <!-- è´¦å·åŸºæœ¬ä¿¡æ¯ -->
      <view class="account-info">
        <view class="account-header">
          <view class="platform-info">
            <view class="platform-icon">{{item.platformIcon}}</view>
            <view class="platform-details">
              <text class="account-name">{{item.accountName}}</text>
              <text class="platform-name">{{item.platform}}</text>
            </view>
          </view>
          <view class="status-badge {{item.status === 2 ? 'settled' : 'pending'}}">
            <text class="status-text">{{item.status === 1 ? 'å¾…ç»“ç®—' : 'å·²ç»“ç®—'}}</text>
          </view>
        </view>
        
        <view class="account-details">
          <view class="track-info">
            <view class="track-icon">{{item.trackIcon}}</view>
            <text class="track-type">{{item.trackType}}</text>
          </view>
          
          <view class="articles-info">
            <text class="articles-count">{{item.articlesCount}}</text>
            <text class="articles-label">ç¯‡</text>
          </view>
        </view>
      </view>

      <!-- ç»“ç®—æ—¶é—´ä¿¡æ¯ -->
      <view class="settlement-info">
        <text class="settlement-period-text">{{item.settlementPeriod}}</text>
        <text class="last-settlement">ç»“ç®—æ—¶é—´ï¼š{{item.lastSettlementTime}}</text>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="action-area">
        <view 
          class="settlement-button {{item.status === 2 ? 'disabled' : ''}}" 
          catchtap="onSettlementTap"
          data-index="{{index}}"
        >
          <text class="button-text">{{item.status === 2 ? 'å·²ç»“ç®—' : 'ç‚¹å‡»ç»“ç®—'}}</text>
        </view>
      </view>
      
      <!-- å·²ç»“ç®—çŠ¶æ€ä¸‹çš„æ”¶ç›Šæ˜¾ç¤º -->
      <view class="earnings-display" wx:if="{{item.status === 2}}">
        <view class="earnings-item-small">
          <text class="earnings-label-small">æœ¬æœŸè´¦å·æ”¶ç›Š</text>
          <text class="earnings-number-small">Â¥{{item.accountEarnings}}</text>
        </view>
        <view class="earnings-item-small">
          <text class="earnings-label-small">æœ¬æœŸç»“ç®—æ”¶ç›Š</text>
          <text class="earnings-number-small">Â¥{{item.settlementEarnings}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{settlementStats.totalAccounts === 0}}">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">æš‚æ— ç»“ç®—è´¦å·</text>
    <text class="empty-desc">æœ¬æœŸæ²¡æœ‰éœ€è¦ç»“ç®—çš„è´¦å·</text>
  </view>
</view> 