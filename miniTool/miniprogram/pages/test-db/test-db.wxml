<!-- 文件下载测试页面 -->
<view class="test-container">
  <view class="test-section">
    <view class="section-title">文件下载测试</view>
    <button class="test-btn" bindtap="downloadTestFile">下载测试文件</button>
    <button class="test-btn" bindtap="viewDownloadedFiles">查看下载文件列表</button>
    
    <!-- 下载状态 -->
    <view class="download-status" wx:if="{{downloadStatus}}">
      <text class="status-text">{{downloadStatus}}</text>
    </view>
    
    <!-- 文件列表 -->
    <view class="file-list" wx:if="{{downloadedFiles.length > 0}}">
      <view class="file-item" wx:for="{{downloadedFiles}}" wx:key="index" bindtap="readFileContent" data-file="{{item}}">
        <text class="file-name">{{item.name}}</text>
        <text class="file-size">{{item.size}}</text>
        <text class="file-time">{{item.time}}</text>
      </view>
    </view>
    
    <!-- 文件内容预览 -->
    <view class="file-preview" wx:if="{{currentFile && fileContent}}">
      <view class="preview-header">
        <view class="preview-title-row">
          <text class="preview-title">文件内容预览</text>
          <button class="view-effect-btn" bindtap="goToArticlePreview" wx:if="{{fileContent}}">
            查看效果
          </button>
        </view>
        <text class="preview-filename">{{currentFile.name}}</text>
      </view>
      <view class="preview-content">
        <!-- 原始文本视图 -->
        <text class="content-text">{{fileContent}}</text>
      </view>
    </view>
    
    <!-- 无文件提示 -->
    <view class="no-data" wx:if="{{downloadedFiles.length === 0 && downloadStatus && !downloadStatus.includes('失败')}}">
      <text class="no-data-text">暂无下载的文件</text>
      <text class="no-data-hint">点击"下载测试文件"开始下载</text>
    </view>
  </view>
</view> 