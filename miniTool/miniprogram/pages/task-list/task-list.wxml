<!-- 任务列表页面 -->
<view class="task-list-container">
  <!-- 状态显示 -->
  <view class="status-display" wx:if="{{currentStatus !== null}}">
    <text class="status-text">{{statusDisplayText}}任务</text>
  </view>

  <!-- 任务列表 -->
  <view class="task-list">
    <view class="task-item" wx:for="{{taskList}}" wx:key="taskId" bindtap="viewTaskDetail" data-task="{{item}}">
      <view class="task-header">
        <view class="task-platform">
          <text class="platform-icon">{{item.platformIcon}}</text>
          <text class="platform-name">{{item.platformName}}</text>
        </view>
        <view class="task-status {{item.statusClass}}">
          <text class="status-text">{{item.statusText}}</text>
        </view>
      </view>
      
      <view class="task-content">
        <view class="task-title">
          {{item.articleTitle}}
          <text class="claimed-badge" wx:if="{{item.isClaimed}}">已领取</text>
        </view>
        
        <view class="task-info">
          <view class="info-row">
            <view class="info-item">
              <text class="info-label">任务ID：</text>
              <text class="info-value">{{item.taskId}}</text>
            </view>
            <view class="info-item">
              <text class="info-label">赛道：</text>
              <text class="info-value">{{item.trackType}}</text>
            </view>
          </view>
          <view class="info-row">
            <view class="info-item">
              <text class="info-label">账号：</text>
              <text class="info-value">{{item.accountName}}</text>
            </view>
            <view class="info-item">
              <text class="info-label">任务日期：</text>
              <text class="info-value">{{item.taskTime}}</text>
            </view>
          </view>
        </view>
      </view>
      
      <view class="task-footer">
        <view class="task-actions" wx:if="{{item.status === 1}}">
          <button class="action-btn save-btn" catchtap="saveTaskInfo" data-task="{{item}}">
            <text class="btn-icon">⬇️</text>
            <text class="btn-text">下载</text>
          </button>
          <button class="action-btn upload-btn" catchtap="uploadTask" data-task="{{item}}">
            <text class="btn-icon">📤</text>
            <text class="btn-text">回传</text>
          </button>
        </view>
        <view class="task-completed" wx:elif="{{item.status === 2}}">
          <text class="completed-text">任务已完成</text>
        </view>
        <view class="task-rejected" wx:elif="{{item.status === 3}}">
          <text class="rejected-text">任务已拒绝</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{taskList.length === 0}}">
    <text class="empty-icon">📋</text>
    <text class="empty-text">暂无任务</text>
    <text class="empty-desc" wx:if="{{currentStatus === 1}}">还未领取今日任务，点击账号去文章列表领取今日发表的文章任务吧！</text>
    <text class="empty-desc" wx:elif="{{currentStatus === 2}}">还没有发表回传过文章，快去发表今日文章吧！</text>
    <text class="empty-desc" wx:elif="{{currentStatus === 3}}">当前筛选条件下没有找到相关任务</text>
    <text class="empty-desc" wx:else>当前筛选条件下没有找到相关任务</text>
  </view>

  <!-- 加载状态 -->
  <view class="loading-state" wx:if="{{loading && taskList.length === 0}}">
    <view class="loading">
      <text class="loading-text">加载中...</text>
    </view>
  </view>
</view> 