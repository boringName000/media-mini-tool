<!-- 任务列表页面 -->
<view class="task-list-container">
  <!-- 状态显示 -->
  <view class="status-display" wx:if="{{currentStatus !== null}}">
    <text class="status-text">{{statusDisplayText}}任务</text>
  </view>

  <!-- 任务列表 -->
  <view class="task-list">
    <view class="task-item" wx:for="{{taskList}}" wx:key="taskId" bindtap="viewTaskDetail" data-task="{{item}}">
      <view class="task-header">
        <view class="task-platform">
          <text class="platform-icon">{{item.platformIcon}}</text>
          <text class="platform-name">{{item.platformName}}</text>
        </view>
        <view class="task-status {{item.statusClass}}">
          <text class="status-text">{{item.statusText}}</text>
        </view>
      </view>
      
      <view class="task-content">
        <view class="task-title">{{item.articleTitle}}</view>
        
        <view class="task-info">
          <view class="info-row">
            <view class="info-item">
              <text class="info-label">任务ID：</text>
              <text class="info-value">{{item.taskId}}</text>
            </view>
            <view class="info-item">
              <text class="info-label">赛道：</text>
              <text class="info-value">{{item.trackType}}</text>
            </view>
          </view>
          <view class="info-row">
            <view class="info-item">
              <text class="info-label">账号：</text>
              <text class="info-value">{{item.accountName}}</text>
            </view>
            <view class="info-item">
              <text class="info-label">任务时间：</text>
              <text class="info-value">{{item.taskTime}}</text>
            </view>
          </view>
        </view>
      </view>
      
      <view class="task-footer">
        <view class="task-actions" wx:if="{{item.status === 1}}">
          <button class="action-btn download-btn" catchtap="downloadTask" data-task="{{item}}">下载</button>
          <button class="action-btn upload-btn" catchtap="uploadTask" data-task="{{item}}">回传</button>
        </view>
        <view class="task-completed" wx:elif="{{item.status === 2}}">
          <text class="completed-text">任务已完成</text>
        </view>
        <view class="task-rejected" wx:elif="{{item.status === 3}}">
          <text class="rejected-text">任务已拒绝</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{taskList.length === 0}}">
    <text class="empty-icon">📋</text>
    <text class="empty-text">暂无任务</text>
    <text class="empty-desc">当前筛选条件下没有找到相关任务</text>
  </view>

  <!-- 加载更多 -->
  <view class="load-more" wx:if="{{hasMore && taskList.length > 0}}">
    <text class="load-text" wx:if="{{!loading}}">上拉加载更多</text>
    <view class="loading" wx:else>
      <text class="loading-text">加载中...</text>
    </view>
  </view>
</view> 