<!-- 管理端配置页面 -->
<view class="admin-config-container">
  <!-- 页面标题 -->
  <view class="page-header">
    <text class="page-title">管理端配置</text>
    <text class="page-subtitle">管理员功能配置</text>
  </view>

  <!-- 上传文章区域 -->
  <view class="upload-section">
    <view class="section-title">
      <text class="title-text">上传文章</text>
    </view>

    <!-- 选择配置 -->
    <view class="config-row">
      <!-- 赛道类型选择 -->
      <view class="select-group">
        <text class="select-label">赛道类型</text>
        <picker 
          class="select-picker" 
          mode="selector" 
          range="{{trackTypeOptions}}" 
          range-key="label"
          bindchange="onTrackTypeChange"
        >
          <view class="picker-content">
            <text class="picker-text">
              {{selectedTrackTypeLabel}}
            </text>
            <text class="picker-arrow">›</text>
          </view>
        </picker>
      </view>

      <!-- 平台类型选择 -->
      <view class="select-group">
        <text class="select-label">平台类型</text>
        <picker 
          class="select-picker" 
          mode="selector" 
          range="{{platformOptions}}" 
          range-key="label"
          bindchange="onPlatformChange"
        >
          <view class="picker-content">
            <text class="picker-text">
              {{selectedPlatformLabel}}
            </text>
            <text class="picker-arrow">›</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- 文件选择按钮 -->
    <view class="upload-button-container">
      <button 
        class="upload-button" 
        bindtap="onUploadFiles"
        disabled="{{isUploading}}"
      >
        <text class="upload-icon">📁</text>
        <text class="upload-text">选择txt文章文件</text>
      </button>
    </view>

    <!-- 确认上传按钮 -->
    <view class="confirm-upload-container" wx:if="{{uploadedFiles.length > 0}}">
      <button 
        class="confirm-upload-button {{isUploading ? 'uploading' : ''}}" 
        bindtap="onConfirmUpload"
        disabled="{{isUploading}}"
      >
        <text class="upload-icon">📤</text>
        <text class="upload-text">{{isUploading ? '上传中...' : '确认上传'}}</text>
      </button>
    </view>

    <!-- 文件预览信息 -->
    <view class="preview-info" wx:if="{{previewInfo.totalFiles > 0}}">
      <view class="info-header">
        <text class="info-title">文件预览</text>
        <text class="clear-btn" bindtap="onClearAllFiles">清空</text>
      </view>
      
      <view class="info-content">
        <view class="info-item">
          <text class="info-label">文件数量:</text>
          <text class="info-value">{{previewInfo.totalFiles}} 个</text>
        </view>
        <view class="info-item">
          <text class="info-label">总大小:</text>
          <text class="info-value">{{previewInfo.totalSizeFormatted}}</text>
        </view>
        <view class="info-item" wx:if="{{previewInfo.fileTypes.length > 0}}">
          <text class="info-label">文件类型:</text>
          <text class="info-value">{{previewInfo.fileTypesText}}</text>
        </view>
      </view>
    </view>

    <!-- 文件列表 -->
    <view class="file-list" wx:if="{{uploadedFiles.length > 0}}">
      <view class="list-header">
        <text class="list-title">已选择文件</text>
      </view>
      
      <view class="file-item" wx:for="{{uploadedFiles}}" wx:key="index">
        <view class="file-info">
          <view class="file-name">{{item.name}}</view>
          <view class="file-details">
            <text class="file-size">{{item.sizeFormatted}}</text>
            <text class="file-type">{{item.type}}</text>
          </view>
        </view>
        
        <view class="file-status">
          <view class="status-icon {{item.uploadStatus}}">
            <text wx:if="{{item.uploadStatus === 'pending'}}">📋</text>
            <text wx:elif="{{item.uploadStatus === 'uploading'}}">📤</text>
            <text wx:elif="{{item.uploadStatus === 'success'}}">✅</text>
            <text wx:elif="{{item.uploadStatus === 'failed'}}">❌</text>
          </view>
          <text class="status-text">
            {{item.statusText}}
          </text>
        </view>
        
        <view class="file-actions">
          <text class="delete-btn" bindtap="onDeleteFile" data-index="{{index}}">删除</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 提示信息 -->
  <view class="tips-section">
    <view class="tips-title">使用说明</view>
    <view class="tips-content">
      <text class="tip-item">• 仅支持上传 TXT 格式的文本文件</text>
      <text class="tip-item">• 单次最多可选择 10 个文件</text>
      <text class="tip-item">• 文件将上传到云存储的 article 目录</text>
      <text class="tip-item">• 请确保文件内容符合相关规范</text>
    </view>
  </view>
</view>
